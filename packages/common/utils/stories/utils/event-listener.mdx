
[//]: # (Do not edit directly)
[//]: # (Generated by the Cocokits TypeDoc custom theme on Thu Sep 26 2024 23:01:08 GMT+0200)

import { Meta } from '@storybook/addon-docs';
import { MdxDocPage } from '../../../../../packages/internal/storybook-theme-switcher/src';

export const tocItems = [{"id":"customeventlistenert","name":"CustomEventListener<T>"},{"id":"onceeventlistener","name":"onceEventListener()"}];

<Meta title='Utils/Event-listener'/>
<MdxDocPage groupTitle='Utils' toc={tocItems} utilsPage={true} hideCckThemeSwitcher={true}>
# Event-listener

## CustomEventListener\<T\>

A generic class for managing custom event listeners, allowing users to register multiple callbacks
for custom events and emit events that trigger these callbacks in a synchronous manner.

Custom event listeners are useful for decoupling parts of an application by allowing communication
through events without requiring direct references between components.

### Type Parameters

<table class="arg-type-table">
<thead>
<tr>
<th>Type Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>

`T`

</td>
<td>

The type of the event being emitted.

</td>
</tr>
</tbody>
</table>

### Accessors

#### lastValue

```ts
get lastValue(): undefined | T
```

Gets the most recent value emitted by the event listener.

##### Example

```typescript
const listener = new CustomEventListener<number>();
listener.emit(10);
console.log(listener.lastValue); // Outputs: 10
```

```ts
set lastValue(value: T): void
```

##### Parameters

<table class="arg-type-table">
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>

`value`

</td>
<td>

`T`

</td>
</tr>
</tbody>
</table>

##### Returns

`undefined | T`

The last emitted value, or `undefined` if no value has been emitted yet.

### Methods

#### addEventListener()

```ts
addEventListener(callback: EventListenerCallback<T>): void
```

Adds a new callback function to the event listener. When the event is emitted, the
provided callback is invoked synchronously with the event value.
If the same callback is added multiple times, it will only be called once when the event is emitted.

##### Parameters

<table class="arg-type-table">
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>

`callback`

</td>
<td>

`EventListenerCallback<T>`

</td>
<td>

The function to be executed when the event is emitted.

</td>
</tr>
</tbody>
</table>

##### Returns

`void`

##### Example

```typescript
const listener = new CustomEventListener<string>();
listener.addEventListener((value) => console.log(value));
listener.emit('Hello, world!'); // Outputs: Hello, world!
```

#### emit()

```ts
emit(value: T): void
```

Emits a new event value to all registered listeners. The event listeners will be invoked
synchronously and in the order they were added. If no listeners are registered, this method
does nothing.

##### Parameters

<table class="arg-type-table">
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>

`value`

</td>
<td>

`T`

</td>
<td>

The value to be emitted to all listeners.

</td>
</tr>
</tbody>
</table>

##### Returns

`void`

##### Example

```typescript
const listener = new CustomEventListener<number>();
listener.addEventListener((value) => console.log('First:', value));
listener.addEventListener((value) => console.log('Second:', value));
listener.emit(42); // Outputs: First: 42 Second: 42
```

#### removeAllEventListener()

```ts
removeAllEventListener(): void
```

Removes all callback functions from the event listener. After calling this, no listeners
will be triggered by emitted events.

##### Returns

`void`

##### Example

```typescript
const listener = new CustomEventListener<boolean>();
listener.addEventListener((value) => console.log(value));
listener.removeAllEventListener();
listener.emit(true); // No output
```

#### removeEventListener()

```ts
removeEventListener(callback: EventListenerCallback<T>): void
```

Removes a previously added event listener. If the callback is not present, nothing happens.

##### Parameters

<table class="arg-type-table">
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>

`callback`

</td>
<td>

`EventListenerCallback<T>`

</td>
<td>

The function to remove from the event listener.

</td>
</tr>
</tbody>
</table>

##### Returns

`void`

##### Example

```typescript
const listener = new CustomEventListener<number>();
const callback = (value: number) => console.log(value);
listener.addEventListener(callback);
listener.removeEventListener(callback);
listener.emit(10); // No output
```

***

## onceEventListener()

```ts
function onceEventListener<K>(
   element: HTMLElement, 
   eventName: K, 
   callback: (ev: HTMLElementEventMap[K]) => void): void
```

Adds an event listener to an HTML element that triggers only once. After the event
fires for the first time, the listener is automatically removed.

This is useful when you want to handle an event only once, such as for one-time
user interactions (e.g., closing a modal, submitting a form). Using this approach
prevents unnecessary event handling after the first occurrence, improving performance
and reducing potential side effects from handling the event multiple times.

### Type Parameters

<table class="arg-type-table">
<thead>
<tr>
<th>Type Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>

`K` *extends* `keyof HTMLElementEventMap`

</td>
<td>

The type of event being listened to, derived from `HTMLElementEventMap`.

</td>
</tr>
</tbody>
</table>

### Parameters

<table class="arg-type-table">
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>

`element`

</td>
<td>

`HTMLElement`

</td>
<td>

The HTML element to which the event listener is added.

</td>
</tr>
<tr>
<td>

`eventName`

</td>
<td>

`K`

</td>
<td>

The name of the event to listen for.

</td>
</tr>
<tr>
<td>

`callback`

</td>
<td>

`(ev: HTMLElementEventMap[K]) => void`

</td>
<td>

The function to be called when the event is triggered.

</td>
</tr>
</tbody>
</table>

### Returns

`void`

### Example

The callback will only execute once, then the listener will be removed.

```typescript
const button = document.querySelector('button');
onceEventListener(button, 'click', () => console.log('Button clicked'));
```

</MdxDocPage>
